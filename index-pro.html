<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stickman Auto-Animator Pro</title>
    <link rel="stylesheet" href="src/pro-styles.css">
    <!-- Core Libraries -->
    <script src="https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.min.js"></script>
    <script src="https://unpkg.com/@huggingface/transformers@2.17.2/dist/transformers.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>üé≠ Stickman Auto-Animator Pro</h1>
            <div class="header-controls">
                <button id="newProjectBtn" class="btn-primary">Nouveau Projet</button>
                <button id="loadProjectBtn" class="btn-secondary">Charger Projet</button>
                <button id="saveProjectBtn" class="btn-secondary">Sauvegarder</button>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Panel: Controls & Settings -->
            <div class="left-panel">
                <div class="panel-section">
                    <h3>üìÅ Fichier Audio</h3>
                    <label for="audioFile" class="upload-btn">
                        üéµ Charger Audio
                        <input type="file" id="audioFile" accept="audio/*" style="display: none;">
                    </label>
                    <div id="audioInfo" class="file-info"></div>
                </div>

                <div class="panel-section">
                    <h3>üé§ Whisper Local</h3>
                    <div class="whisper-controls">
                        <button id="downloadWhisperBtn" class="btn-secondary">üì• T√©l√©charger Mod√®le</button>
                        <button id="transcribeBtn" class="btn-primary" disabled>üéØ Transcrire</button>
                        <div id="whisperStatus" class="status-info">Pr√™t</div>
                    </div>
                    <div class="whisper-settings">
                        <label>
                            Mod√®le:
                            <select id="whisperModel">
                                <option value="tiny">Tiny (39MB)</option>
                                <option value="base" selected>Base (74MB)</option>
                                <option value="small">Small (244MB)</option>
                            </select>
                        </label>
                        <label>
                            <input type="checkbox" id="frenchOptimized" checked>
                            Optimis√© fran√ßais
                        </label>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>üéØ D√©tection d'Intention</h3>
                    <div class="intention-settings">
                        <label>
                            Sensibilit√©:
                            <input type="range" id="intentionSensitivity" min="0.1" max="2" step="0.1" value="1">
                            <span id="sensitivityValue">1.0</span>
                        </label>
                        <label>
                            Fen√™tre temporelle:
                            <input type="range" id="timeWindow" min="0.5" max="5" step="0.5" value="2">
                            <span id="timeWindowValue">2.0s</span>
                        </label>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>üé® Stickman</h3>
                    <div class="stickman-settings">
                        <label>
                            Style:
                            <select id="stickmanStyle">
                                <option value="classic">Classique</option>
                                <option value="modern">Moderne</option>
                                <option value="cartoon">Cartoon</option>
                            </select>
                        </label>
                        <label>
                            Couleur:
                            <input type="color" id="stickmanColor" value="#333333">
                        </label>
                    </div>
                </div>
            </div>

            <!-- Center Panel: Animation Preview -->
            <div class="center-panel">
                <div class="animation-container">
                    <svg id="stickmanSvg" viewBox="0 0 400 300" class="stickman-canvas">
                        <!-- Le stickman sera g√©n√©r√© ici -->
                    </svg>
                    <div class="animation-controls">
                        <button id="playBtn">‚ñ∂Ô∏è</button>
                        <button id="pauseBtn">‚è∏Ô∏è</button>
                        <button id="stopBtn">‚èπÔ∏è</button>
                        <span id="currentTime">00:00</span> / <span id="totalTime">00:00</span>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Properties -->
            <div class="right-panel">
                <div class="panel-section">
                    <h3>üìä Transcription</h3>
                    <div id="transcriptionPanel" class="transcription-panel">
                        <div class="transcription-text" id="transcriptionText">
                            Aucune transcription disponible
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>üé≠ Intentions D√©tect√©es</h3>
                    <div id="intentionsPanel" class="intentions-panel">
                        <!-- Les intentions seront list√©es ici -->
                    </div>
                </div>

                <div class="panel-section export-section">
                    <h3>üì§ Export</h3>
                    <button id="exportSvgBtn" class="btn-primary">üíæ SVG Anim√©</button>
                    <button id="exportVideoBtn" class="btn-primary">üé¨ Vid√©o MP4</button>
                    <button id="exportJsonBtn" class="btn-secondary">üìã Projet JSON</button>
                </div>
            </div>
        </div>

        <!-- Bottom Panel: Timeline -->
        <div class="timeline-panel">
            <div class="timeline-header">
                <h3>‚è±Ô∏è Timeline √âditable</h3>
                <div class="timeline-controls">
                    <button id="addKeyframeBtn" class="btn-small">‚ûï Keyframe</button>
                    <button id="deleteKeyframeBtn" class="btn-small">üóëÔ∏è Supprimer</button>
                    <div class="zoom-controls">
                        <button id="zoomInBtn">üîç+</button>
                        <button id="zoomOutBtn">üîç-</button>
                    </div>
                </div>
            </div>
            
            <!-- Waveform -->
            <div class="waveform-container">
                <div id="waveform"></div>
            </div>
            
            <!-- Timeline Tracks -->
            <div class="timeline-tracks">
                <div class="track-header">
                    <div class="track-label">üé§ Transcription</div>
                </div>
                <div id="transcriptionTrack" class="timeline-track transcription-track">
                    <!-- Segments de transcription -->
                </div>
                
                <div class="track-header">
                    <div class="track-label">üéØ Intentions</div>
                </div>
                <div id="intentionTrack" class="timeline-track intention-track">
                    <!-- Keyframes d'intention -->
                </div>
                
                <div class="track-header">
                    <div class="track-label">üé≠ Animation</div>
                </div>
                <div id="animationTrack" class="timeline-track animation-track">
                    <!-- Keyframes d'animation -->
                </div>
            </div>
            
            <!-- Timeline Ruler -->
            <div class="timeline-ruler" id="timelineRuler">
                <!-- Marqueurs de temps -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="src/whisper-local.js"></script>
    <script src="src/intention-detector.js"></script>
    <script src="src/svg-stickman.js"></script>
    <script src="src/timeline-editor.js"></script>
    <script src="src/project-manager.js"></script>
    <script src="src/main-pro.js"></script>
</body>
</html>
